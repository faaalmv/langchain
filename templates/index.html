<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agente de Investigación Web</title>
    </head>
<body>

    <h1>Agente de Investigación Web</h1>

    <textarea id="query-input" placeholder="Escribe aquí tu solicitud de investigación..."></textarea>
    <br>
    <button id="submit-button">Investigar</button>

    <hr>

    <h2>Resultados:</h2>
    <div id="results-container">
        </div>
    
    <script>
        const queryInput = document.getElementById('query-input');
        const submitButton = document.getElementById('submit-button');
        const resultsContainer = document.getElementById('results-container');

        submitButton.addEventListener('click', () => {
            const query = queryInput.value;
            resultsContainer.innerHTML = 'Investigando, por favor espera...';

            fetch('/api/investigate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ query: query })
            })
            .then(response => response.json())
            .then(data => {
                // Tomar la respuesta del agente desde el objeto 'data'
                const agentResponse = data.response;
                // Mostrar la respuesta en el contenedor de resultados
                resultsContainer.innerText = agentResponse; // Usamos innerText para evitar problemas de formato
            })
            .catch(error => {
                console.error('Error:', error);
                resultsContainer.innerHTML = 'Ocurrió un error al contactar al servidor.';
            });
        });
    </script>

</body>
</html>